{% extends "dashboard.html" %}
{% block title %}Dashboard{% endblock %}

{% block css %}
  {{ super() }}
    <link href="{{ url_for('static', filename='assets/css/user_collection.css') }}" rel="stylesheet">
{% endblock %}

{% block bottomJS %}
  {{ super() }}
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <script src="{{ url_for('static', filename='assets/js/ie-emulation-modes-warning.js') }}"></script>
  <script type="text/javascript">
      $( function() {
        $( ".accordion" ).accordion();
      } );
  </script>

{% endblock %}

{% block collection %}
  <div class="row">
    {% if session['collection']|length is equalto 0  %}
      <div class="col-md-3 user_collection">
        <a href="{{ url_for('add_collection') }}" class="btn btn-primary">Create a new Collection Now</a>
      </div>
    {% else %}

      {% for coll  in session['collection'] %}
        {% set i = session['collection'].index(coll) %}

        <div class="col-md-3 user_collection">
          <p> {{ coll['label'] }}</p>
          <p><a href="" class="label label-danger">Delete Collection</a> | <a href="{{ url_for('add_card',collection=i) }}" class="label label-success"> Add Card </a></p>
          {% if coll['cards']|length is equalto 0  %}
          {% else %}
            {% for card in coll['cards'] %}
              {% set j = coll['cards'].index(card) %}
            <div class="accordion">
              <h3>{{ card['label'] }} </h3>
              <div>
                <a style="text-decoration: underline;" href="{{ url_for('add_item',collection=i, card=j) }}"> Add Item </a>
              </div>
            </div>
            {% endfor %}
          {% endif %}
        </div>
      {% endfor %}
      <div class="col-md-3 user_collection">
        <a href="{{ url_for('add_collection') }}" class="btn btn-success">Add Collection</a>
      </div>
    {% endif %}
  </div>
{% endblock %}